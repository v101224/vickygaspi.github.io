<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nuestro Primer AÃ±o ðŸ’ž</title>
  <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        height: 100vh;
        overflow: hidden;
        background: radial-gradient(circle at center, #ffd6e0 0%, #f0b3d1 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Poppins", sans-serif;
        transition: background 2s ease;
      }

      .scene {
        position: relative;
        width: 260px;
        height: 230px;
        perspective: 1000px;
        cursor: pointer;
        transition: transform 2s ease, opacity 2s ease;
        z-index: 5;
      }

      .zoom-in {
        transform: scale(8);
        opacity: 0;
      }
      
      /* CORAZÃ“N */
      .heart{
        width:100%;
        height:100%;
        background:red;
        clip-path: path("M130 220 C 20 140, 0 70, 65 40 C 100 20, 130 50, 130 50 C 130 50, 160 20, 195 40 C 260 70, 240 140, 130 220 Z");
        box-shadow:0 10px 30px rgba(0,0,0,0.3);
      }

      .heart-base {
        background: url('images/Sin título-1.png') no-repeat center/contain;
        position: absolute;
        width: 260px;
        height: 230px;
      }

      .heart-lid {
        position: absolute;
        width: 260px;
        height: 230px;
        background: url('https://images.emojiterra.com/google/noto-emoji/unicode-15/color/512px/1f49d.png') no-repeat center/contain;
        transform-origin: top center;
        transition: transform 1.2s ease;
        z-index: 6;
      }

      .heart-lid.open {
        transform: rotateX(-130deg);
      }

      .inside {
        position: fixed;
        inset: 0;
        background: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        opacity: 0;
        pointer-events: none;
        transform: scale(0.8);
        transition: opacity 1.2s ease, transform 1.6s ease;
        z-index: 20;
      }

      .inside.active {
        opacity: 1;
        pointer-events: all;
        transform: scale(1);
      }

      h1 {
        color: #b21f66;
        margin: 15px 0 5px;
        font-size: 1.4rem;
        text-align: center;
      }

      p {
        color: #7a4e7c;
        margin: 0 15px 10px;
        text-align: center;
        font-size: 0.9rem;
      }

      .carousel {
        display: flex;
        overflow: hidden;
        width: 100%;
        height: calc(100vh - 180px);
        position: relative;
        touch-action: pan-y;
      }

      .nav-btn {
        position: absolute;
        top: 50%; /* Centra verticalmente */
        transform: translateY(-50%);
        background: rgba(178, 31, 102, 0.7); /* Fondo semi-transparente del color del tema */
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.9rem;
        z-index: 10; /* Asegura que estÃ©n por encima del carrusel */
        transition: background 0.3s, opacity 0.3s;
        user-select: none; /* Evita la selecciÃ³n de texto */
        -webkit-tap-highlight-color: transparent; /* Mejora la experiencia mÃ³vil */
      }

      .nav-btn:hover {
        background: #8b1450;
      }

      .nav-btn:disabled {
        opacity: 0.5; /* Opacidad reducida cuando estÃ¡n deshabilitados */
        cursor: default;
      }

      .prev-btn {
        left: 10px;
      }

      .next-btn {
        right: 10px;
      }

      .carousel-track {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 0.35s cubic-bezier(.22,.9,.27,1);
        will-change: transform;
        -webkit-tap-highlight-color: transparent;
      }

      .slide {
        flex: 0 0 100%;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 10px;
      }

      .slide img,
      .slide video {
        width: 90%;
        max-height: 60vh;
        object-fit: cover;
        border-radius: 20px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        user-select: none;
      }

      .slide p {
        margin-top: 10px;
        color: #5a3b60;
        font-size: 0.95rem;
      }

      button {
        background: #b21f66;
        color: white;
        border: none;
        padding: 10px 25px;
        border-radius: 25px;
        font-size: 1rem;
        margin: 20px 0;
        cursor: pointer;
        transition: background 0.3s;
        z-index: 30;
      }

      button:hover {
        background: #8b1450;
      }

      footer {
        color: #777;
        font-size: 0.8rem;
        margin-bottom: 10px;
      }

      .nav-btn {
        position: absolute;
        top: 90%;
        transform: translateY(-50%);
        background: rgba(178, 31, 102, 0.7); /* Fondo semi-transparente del color del tema */
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: bold;
        z-index: 10;
        transition: background 0.3s, opacity 0.3s;
        user-select: none; /* Evita la selecciÃ³n de texto */
        -webkit-tap-highlight-color: transparent; /* Mejora la experiencia mÃ³vil */
      }

      .nav-btn:hover {
        background: #8b1450;
      }

      .nav-btn:disabled {
        opacity: 0.3; /* Opacidad reducida cuando estÃ¡n deshabilitados */
        cursor: default;
      }

      .prev-btn {
        left: 10px;
      }

      .next-btn {
        right: 10px;
      }

      .end {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 1s ease;
        z-index: 5;
        background: transparent; /* Fondo transparente */
        pointer-events: none;
      }

      .end img {
        width: 80%;
        max-width: 400px;
        border-radius: 20px;
        margin-bottom: 20px;
      }

      .end p {
        color: #b21f66;
        font-size: 1.5rem;
        font-weight: bold;
        text-align: center;
        padding: 0 20px;
        font-family: "Poppins", sans-serif;
      }

      /* Estilos para el mensaje de aniversario */
      .container {
      width: 90%;
      max-width: 400px;
      text-align: center;
      }

      .aniversario {
          background: white;
          padding: 20px;
          border-radius: 20px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          font-size: 1.3rem;
          font-weight: bold;
          animation: aparecer 1s ease forwards;
          opacity: 0;
      }

      /* AnimaciÃ³n */
      @keyframes aparecer {
          from {
              transform: translateY(30px);
              opacity: 0;
          }
          to {
              transform: translateY(0);
              opacity: 1;
          }
      }

      .oculto {
          display: none;
      }

      /* --------------------------------------------- */
    /* Estilos para el quiz */
    .quiz-screen{
      position: fixed;
      inset:0;  
      background:rgba(0,0,0,0.5);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:30;
      padding: max(16px, env(safe-area-inset-top)) 16px max(16px, env(safe-area-inset-bottom));
    }
    .quiz-box{
      background:white;
      width:min(92vw, 340px);
      max-width:340px;
      padding:18px;
      border-radius:20px;
      box-shadow:0 10px 30px rgba(0,0,0,0.2);
    }

    .quiz-box h2{
      margin: 0 0 10px;
      font-size: clamp(1rem, 4.5vw, 1.2rem);
      line-height: 1.3;
      color:#b21f66;
    }

    #answers button{
      font-size: clamp(0.95rem, 4vw, 1rem);
      padding: 11px 10px;
      line-height: 1.25;
    }

    .quiz-progress{
      margin: 6px 0 0;
      font-size: 0.85rem;
      color:#7a4e7c;
      text-align:center;
    }

    button{
      display:block;
      width:100%;
      margin:10px 0;
      padding:12px;
      border:none;
      border-radius:12px;
      font-size:16px;
      cursor:pointer;
      background:#ff69b4;
      color:white;
      transition:0.3s;
    }

    button:hover{
      background:#ff3f9e;
    }

    .hidden{
      display:none;
    }

    @media (max-width: 375px) and (max-height: 812px) {
      .scene {
        width: 230px;
        height: 205px;
      }

      .heart-base,
      .heart-lid {
        width: 230px;
        height: 205px;
      }

      h1 {
        font-size: 1.2rem;
      }

      p {
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body>
  <div class="quiz-screen" id="quizScreen">
    <div class="quiz-box" id="quizBox">
      <h2 id="question"></h2>
      <div id="answers"></div>
      <p class="quiz-progress" id="quizProgress"></p>
    </div>
    <div class="quiz-box hidden" id="resultBox">
      <h2 id="resultText"></h2>
      <button id="startBtn">Abrir coraz&oacute;n</button>
    </div>
  </div>

  <div class="scene" id="scene">
    <div class="heart-base"></div>
    <div class="heart-lid" id="lid"></div>
  </div>

  <div class="inside" id="inside">
    <h1>Nuestro primer a&ntilde;ito</h1>
    <p>Por muchos m&aacute;s juntitos</p>

    <div class="container">
      <div id="mensajeAniversario" class="aniversario oculto">
          <h5>Â¡Feliz mesiversario mi amor!ðŸŽ‰</h4>  
          <h6>Gracias otro mes hermoso juntos.</h6>
      </div>
    </div>

    <div class="carousel" id="carousel">
        <!--
        <button id="prevBtn" class="nav-btn prev-btn"><</button>
        <button id="nextBtn" class="nav-btn next-btn">></button> 
        -->

        <div class="carousel-track" id="track">
            <div class="slide">
                <img src="images/diciembre.jpg" alt="foto1">
                <p>âœ¨ Los ojitos que me enamoraron</p>
            </div>

            <div class="slide">
                <video src="images/enero.mp4" autoplay muted loop playsinline></video>
                <p>ðŸŒ¹ Como no enamorarme con esos ojitos</p>
            </div>

            <div class="slide">
                <video src="images/febrero.mp4" autoplay muted loop playsinline></video>
                <p>ðŸ’• Me encanta pasar tiempo contigo</p>
            </div>

            <div class="slide">
                <video src="images/marzo.mp4" autoplay muted loop playsinline></video>
                <p>ðŸ’ž No hay paisaje m&aacute;s hermoso que tu cuerpo</p>
            </div>

            <div class="slide">
                <img src="images/abril.jpg">
                <p>ðŸ¥° Todav&iacute;a me pongo nervioso al verte</p>
            </div>

            <div class="slide">
                <video src="images/junio.mp4" autoplay muted loop playsinline></video>
                <p>ðŸ’˜ Cada d&iacute;a me enamoro m&aacute;s de la hermosa persona que sos</p>
            </div>

            <div class="slide">
                <img src="images/julio.png">
                <p>ðŸ’‹ Cada d&iacute;a me dan m&aacute;s ganas de besar esa boquita</p>
            </div>

            <div class="slide">
                <img src="images/agosto.jpg">
                <p>ðŸŒ¹ Cada vez que veo esa carita me roba el corazon</p>
            </div>

            <div class="slide">
                <img src="images/septiembre.jpg">
                <p>â£ Me emociona cada uno de tus te amo</p>
            </div>

            <div class="slide">
                
                <img id="octubreFoto" src="images/octubre.png" alt="octubre">
                <p>ðŸ’« Gracias por todos los momentos hermosos</p>
            </div>

            <div class="slide">
                <img src="images/noviembre.jpg">
                <p>ðŸ’• Gracias por hacerme tan bien</p>
            </div>

            <div class="slide">
                <img src="images/diciembre25.png">
                <p>ðŸ’ Por muchos m&aacute;s momentos y a&ntilde;os a tu lado</p>
            </div>

            <div class="slide">
                <img src="images/IMG_0154.jpeg">
                <p>ðŸ’ No hay nada m&aacute;s lindo que mirar esa carita</p>
            </div>
        </div>
    </div>
    <button id="closeBtn">Cerrar</button>
</div>
<div class="end">
  <img src="images/extra.png">
  <p>Cada d&iacute;a te amo m&aacute;s y m&aacute;s</p>
</div>
<audio id="octubreAudio" src="audio/aventura.wav" preload="auto"></audio>

  <script>
    const lid = document.getElementById('lid');
    const inside = document.getElementById('inside');
    const scene = document.getElementById('scene');
    const closeBtn = document.getElementById('closeBtn');
    const endDiv = document.querySelector('.end');
    const octubreFoto = document.getElementById('octubreFoto');
    const octubreAudio = document.getElementById('octubreAudio');
    const quizScreen = document.getElementById('quizScreen');
    const quizBox = document.getElementById('quizBox');
    const resultBox = document.getElementById('resultBox');
    const questionEl = document.getElementById('question');
    const answersEl = document.getElementById('answers');
    const resultText = document.getElementById('resultText');
    const startBtn = document.getElementById('startBtn');
    const quizProgress = document.getElementById('quizProgress');
    let canOpenHeart = false;

    if (quizScreen) quizScreen.classList.remove("hidden");
    if (quizBox) quizBox.classList.remove("hidden");
    if (resultBox) resultBox.classList.add("hidden");

    /* --- NUEVAS REFERENCIAS PARA LOS BOTONES ---
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    // -------------------------------------------*/

    scene.addEventListener('click', () => {
        if (!canOpenHeart) return;
        lid.classList.add('open');
        setTimeout(() => { scene.classList.add('zoom-in'); }, 700);

        setTimeout(() => {
            document.body.style.background = "white";
            inside.classList.add('active');
            moveToIndex(0, false);
            playVideoAtIndex(0);
        }, 2200);
    });

    closeBtn.addEventListener('click', () => {
        inside.classList.remove('active');
        document.body.style.background = "radial-gradient(circle at center, #ffd6e0 0%, #f0b3d1 100%)";
        moveToIndex(0, false);
        setTimeout(() => { scene.classList.remove('zoom-in'); lid.classList.remove('open'); }, 400);
        setTimeout(() => {
          scene.style.opacity = '0';
        }, 2000);
        setTimeout(() => {
            endDiv.style.opacity = '1';
        }, 2500);
    });

    // ----------------------------
    //        CARRUSEL / SWIPE
    // ----------------------------

    const carousel = document.getElementById('carousel');
    const track = document.getElementById('track');
    const slides = Array.from(track.children);

    let index = 0, startX = 0, startY = 0, currentTranslate = 0, prevTranslate = 0;
    let dragging = false, animationFrameId = null;
    let isHorizontalSwipe = false;

    function getWidth() { return carousel.clientWidth; }
    function setTranslate(x, el = track) { el.style.transform = `translateX(${x}px)`; }
    function animation() {
        setTranslate(currentTranslate);
        if (dragging) {
            animationFrameId = requestAnimationFrame(animation);
        }
    }

    function touchStart(e) {
        if (e.type.includes('mouse')) {
            startX = e.clientX;
            startY = e.clientY;
        } else {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
        }
        
        dragging = true;
        isHorizontalSwipe = false;
        prevTranslate = -index * getWidth();
        currentTranslate = prevTranslate;
        cancelAnimationFrame(animationFrameId);
        animationFrameId = requestAnimationFrame(animation);
        
        // Para mouse, prevenir selecciÃ³n de texto durante el drag
        if (e.type.includes('mouse')) {
            e.preventDefault();
        }
    }

    function touchMove(e) {
        if (!dragging) return;
        
        let currentX, currentY;
        
        if (e.type.includes('mouse')) {
            currentX = e.clientX;
            currentY = e.clientY;
        } else {
            currentX = e.touches[0].clientX;
            currentY = e.touches[0].clientY;
        }
        
        const deltaX = currentX - startX;
        const deltaY = currentY - startY;
        
        // Determinar si el gesto es principalmente horizontal
        if (!isHorizontalSwipe && Math.abs(deltaX) > Math.abs(deltaY)) {
            isHorizontalSwipe = true;
        }
        
        if (isHorizontalSwipe) {
            currentTranslate = prevTranslate + deltaX;
            // Prevenir scroll vertical durante swipe horizontal
            e.preventDefault();
        }
    }

    function touchEnd(e) {
        if (!dragging) return;
        dragging = false;
        cancelAnimationFrame(animationFrameId);
        
        let endX;
        if (e.type.includes('mouse')) {
            endX = e.clientX;
        } else {
            endX = e.changedTouches[0].clientX;
        }
        
        const moved = endX - startX;
        const t = getWidth() * 0.15;
        
        // Cambiar slide solo si el gesto fue horizontal
        if (isHorizontalSwipe && Math.abs(moved) > t) {
            if (moved < 0 && index < slides.length - 1) {
                index++;
            } else if (moved > 0 && index > 0) {
                index--;
            }
        }
        
        moveToIndex(index, true);
        isHorizontalSwipe = false;
    }

    // ----------------------------
    //      REPRODUCCIÃ“N DE VIDEOS Y BOTONES
    // ----------------------------

    function playVideoAtIndex(i) {
        slides.forEach((slide, idx) => {
            const v = slide.querySelector("video");
            if (!v) return;

            v.muted = true;
            v.playsInline = true;

            if (idx === i) {
                v.play().catch(() => {});
            } else {
                v.pause();
                v.currentTime = 0;
            }
        });
    }

    /* FunciÃ³n para habilitar/deshabilitar los botones de navegaciÃ³n
    function updateNavButtons() {
        prevBtn.disabled = index === 0;
        nextBtn.disabled = index === slides.length - 1;
    }*/

    function moveToIndex(i, animate = true) {
        index = Math.max(0, Math.min(i, slides.length - 1));
        const x = -index * getWidth();

        track.style.transition = animate
            ? 'transform 0.35s cubic-bezier(.22,.9,.27,1)'
            : 'none';

        setTranslate(x);

        if (animate) {
            const handleTransitionEnd = () => {
                track.style.transition = 'none';
                playVideoAtIndex(index);
                track.removeEventListener('transitionend', handleTransitionEnd);
            };
            track.addEventListener('transitionend', handleTransitionEnd);
        } else {
            playVideoAtIndex(index);
        }
        
        /* Actualiza el estado de los botones
        updateNavButtons();
        */
    }

    // ----------------------------
    //      EVENTOS DE GESTOS Y BOTONES
    // ----------------------------

    // Aplicar eventos a TODO el carrusel (no solo al track)
    carousel.addEventListener('touchstart', touchStart, { passive: false });
    carousel.addEventListener('touchmove', touchMove, { passive: false });
    carousel.addEventListener('touchend', touchEnd);

    carousel.addEventListener('mousedown', touchStart);
    window.addEventListener('mousemove', touchMove);
    window.addEventListener('mouseup', touchEnd);

    // Prevenir comportamiento por defecto en elementos dentro del carrusel
    slides.forEach(s => {
        const img = s.querySelector('img');
        const video = s.querySelector('video');
        
        if (img) {
            img.addEventListener('dragstart', e => e.preventDefault());
            img.addEventListener('mousedown', e => e.stopPropagation());
        }
        if (video) {
            video.addEventListener('dragstart', e => e.preventDefault());
            video.addEventListener('mousedown', e => e.stopPropagation());
        }
    });

    /* Prevenir que los eventos en botones interfieran con el carrusel
    prevBtn.addEventListener('mousedown', e => e.stopPropagation());
    nextBtn.addEventListener('mousedown', e => e.stopPropagation());*/

    window.addEventListener('resize', () => moveToIndex(index, false));

    /* --- LISTENERS PARA LOS BOTONES DE NAVEGACIÃ“N ---
    prevBtn.addEventListener('click', () => {
        if (index > 0) moveToIndex(index - 1, true);
    });

    nextBtn.addEventListener('click', () => {
        if (index < slides.length - 1) moveToIndex(index + 1, true);
    });
    // ------------------------------------------------

    // Iniciar posiciÃ³n y estado de botones
    moveToIndex(0, false);
    updateNavButtons();*/

    // Verificar si es el mes del aniversario
    const fechaAniversario = new Date(2024, 11, 10); // AÃ±o, Mes (0-11), DÃ­a
    const hoy = new Date();
    const mesHoy = hoy.getMonth();
    const mesAniversario = fechaAniversario.getMonth();

    if (mesHoy === mesAniversario) {
        document.getElementById("mensajeAniversario").classList.remove("oculto");
    }

    if (octubreFoto && octubreAudio) {
        octubreFoto.addEventListener('click', () => {
            octubreAudio.currentTime = 0;
            octubreAudio.play().catch(() => {});
        });
    }

    const preguntas = [
      {
        pregunta: "¿Dónde fue nuestra primera cita?",
        opciones: ["El cine", "La plaza", "Mi casa", "El shopping"],
        correcta: 3
      },
      {
        pregunta: "¿Cuál es mi comida favorita?",
        opciones: ["Pizza", "Sushi", "Hamburguesa", "Milanesa"],
        correcta: 3
      },
      {
        pregunta: "¿Qué apodo te digo cuando estoy con mis amigos?",
        opciones: ["Mi reina", "Vicky", "Mi mujer", "Todas las anteriores"],
        correcta: 2
      }
    ];

    let actual = 0;
    let puntos = 0;

    function mostrarPregunta() {
      const p = preguntas[actual];
      questionEl.textContent = p.pregunta;
      quizProgress.textContent = `Pregunta ${actual + 1} de ${preguntas.length}`;
      answersEl.innerHTML = "";

      p.opciones.forEach((opcion, idx) => {
        const btn = document.createElement("button");
        btn.textContent = opcion;
        btn.addEventListener("click", () => responder(idx));
        answersEl.appendChild(btn);
      });
    }

    function responder(idx) {
      if (idx === preguntas[actual].correcta) {
        puntos++;
      }
      actual++;

      if (actual < preguntas.length) {
        mostrarPregunta();
      } else {
        mostrarResultado();
      }
    }

    function mostrarResultado() {
      quizBox.classList.add("hidden");
      resultBox.classList.remove("hidden");

      if (puntos >= 2) {
        resultText.textContent = "Acceso concedido, mi amor.";
        startBtn.disabled = false;
      } else {
        resultText.textContent = "Necesitas conocerme más...";
        startBtn.disabled = true;
      }
    }

    startBtn.addEventListener("click", () => {
      if (puntos < 2) return;
      canOpenHeart = true;
      quizScreen.classList.add("hidden");
    });

    mostrarPregunta();
</script>
</body>
</html>

